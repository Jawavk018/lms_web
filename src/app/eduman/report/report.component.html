<div class="container p-5">
  <div class="d-flex">
    <img
      [src]="data?.photo ?? 'https://mdbcdn.b-cdn.net/img/new/avatars/2.webp'"
      class="rounded-circle shadow-4 w-[50px] h-[50px] me-3"
      alt="Avatar"
    />
    <div class="d-flex flex-column flex-fill">
      <h5 class="my-auto">{{ data?.name }}</h5>
      <p class="my-auto">{{ data?.userId }}</p>
    </div>
  </div>
  <h4 class="mt-4 mb-3">Search Report</h4>
  <div class="d-flex justify-content-end">
    <mat-select
      [formControl]="courseCtrl"
      placeholder="Course"
      [multiple]="true"
      class="form-control w-25"
    >
      <mat-option>
        <ngx-mat-select-search
          [formControl]="courseFilterCtrl"
          placeholderLabel="Find Account.."
          noEntriesFoundLabel="No matching found"
          toggleAllCheckboxTooltipMessage="Select / Unselect All"
        >
          <mat-icon ngxMatSelectSearchClear style="font-size: 14px"
            >close</mat-icon
          >
        </ngx-mat-select-search>
      </mat-option>
      <mat-option
        *ngFor="let course of filteredCourse | async"
        style="border-bottom: 1px solid #ced4da !important"
        [value]="course.courseMasterSno"
      >
        {{ course.courseName }}
      </mat-option>
    </mat-select>
    <input
      type="date"
      class="form-control text-center rounded w-auto ms-2"
      id="input-14 "
      [(ngModel)]="fromDate"
    />
    <input
      type="date"
      class="form-control text-center rounded w-auto ms-2"
      id="input-14"
      [(ngModel)]="toDate"
    />
    <button
      class="btn btn-primary ms-2"
      [disabled]="!fromDate?.length || !toDate?.length"
      (click)="search()"
    >
      <i class="fa fa-search" aria-hidden="true"></i>
      &nbsp;Search
    </button>
  </div>
  <div class="mt-4">
    <!-- <ngx-charts-bar-vertical [gradient]="gradient" [xAxis]="showXAxis"
    [yAxis]="showYAxis" [legend]="showLegend" [showXAxisLabel]="showXAxisLabel"
    [showYAxisLabel]="showYAxisLabel" [xAxisLabel]="xAxisLabel" [yAxisLabel]="yAxisLabel"
    [results]="data">
</ngx-charts-bar-vertical> -->
  </div>
  <div *ngIf="isSearch" class="centered text-center">
    <i class="bi bi-search" style="font-size: 5.375rem"></i>
    <h3 class="mt-3">Search</h3>
  </div>
  <div *ngIf="!isSearch && !reportSource.data?.length" class="centered text-center">
    <i class="bi bi-search" style="font-size: 5.375rem"></i>
    <h4 class="mt-3">No data found</h4>
  </div>
  <div class="mt-4" *ngIf="!isSearch && reportSource.data?.length">
    <mat-table [dataSource]="reportSource">
      <ng-container matColumnDef="courseName">
        <mat-header-cell *matHeaderCellDef> Course Name </mat-header-cell>
        <mat-cell *matCellDef="let row"> {{ row.courseName }} </mat-cell>
      </ng-container>
      <ng-container matColumnDef="createdOn">
        <mat-header-cell *matHeaderCellDef> Purchased On </mat-header-cell>
        <mat-cell *matCellDef="let row">
          {{ row.createdOn | date : "dd-MM-yyyy" }}
        </mat-cell>
      </ng-container>
      <ng-container matColumnDef="count">
        <mat-header-cell *matHeaderCellDef> Purchase Count </mat-header-cell>
        <mat-cell *matCellDef="let row"> {{ row.count ?? 0 }} </mat-cell>
      </ng-container>
      <mat-header-row *matHeaderRowDef="report"></mat-header-row>
      <mat-row *matRowDef="let row; columns: report"> </mat-row>
    </mat-table>

    <mat-paginator
      #reportPaginator
      [pageSizeOptions]="[10, 25, 100]"
    ></mat-paginator>
  </div>
</div>
