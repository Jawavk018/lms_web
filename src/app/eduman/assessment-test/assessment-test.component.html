<app-headerone></app-headerone>

<section class="faq-detalis-area pt-[120px] pb-[90px]">
    <div class="container">
        <div class="course-heading mb-[20px] text-center">
            <div class="row">
                <div class="col-md-12">
                    <h3 class="course-detail-title"><span class="text-secondary">{{data?.subCategoryName}}
                            :</span>{{data?.title}}</h3>
                </div>
                <div class="col-md-12">
                    <h3 class="course-detail-title">{{data?.section}}</h3>
                </div>
            </div>
        </div>

        <!-- <div class="card mt-3">
            <div class="card-body">
                <h4 class="card-title">{{ currentQuestion.questionSno }}. {{ currentQuestion.questions }}</h4>
                <div class="card w-50 mt-3" style="background-color: whitesmoke;"
                    *ngFor="let answer of currentQuestion.answer">
                    <div class="d-flex">
                        <input type="radio" [id]="answer.answerCode" name="answer" [value]="answer.answerCode"
                            class="ms-3">
                        <label [for]="answer.answerCode" style="padding: 10px;">{{ answer.answer }}</label>
                    </div>
                </div>
            </div>
            <div class="card-footer">
                <div class="d-flex justify-content-between">
                    <button type="button" class="btn btn-primary" id="previousBtn"
                        (click)="previous()">Previous</button>
                    <button type="button" class="btn btn-primary" id="nextBtn" (click)="next()">Next</button>
                </div>
            </div>
        </div> -->

        <div *ngIf="questionLists == null" style="text-align: center">
            <img src="assets/img/norecord.png" width="200" height="200" />
            <p class="fs-5">No Test Found</p>
        </div>

        <div class="row">
            <div class="col-md-9 col-sm-12 p-0">
                <div id="carouselExampleControls" class="carousel slide" data-bs-interval="false"
                    *ngIf="questionLists != null">
                    <div class="carousel-inner">
                        <div class="carousel-item" *ngFor="let question of questionLists; let i = index"
                            [class.active]="i === currentQuestionIndex">
                            <div class="card mt-4 shadow-lg"
                                style="border-radius: 15px; overflow: auto; height: calc(80vh - 56px);">
                                <div class="card-header text-white"
                                    style="background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);">
                                    <h4 class="card-title">{{ i + 1 }}. {{ question.question }} <small>({{ i + 1 }} / {{
                                            questionLists.length }})</small></h4>
                                </div>
                                <div class="card-body p-3">
                                    <!-- Single Choice Question -->

                                    <div *ngIf="question?.questionsTypeCd == 'Single'">
                                        <div class="card mt-3 p-2 w-75"
                                            *ngFor="let answer of question.answers; let j = index;"
                                            [ngClass]="{'highlighted': question.userAnswer === answer.answerSno}">
                                            <div class="d-flex"
                                                (click)="selectRadioButton(answer.answerSno, i, j, question?.questionsTypeCd)">
                                                <div class="form-check custom-radio">
                                                    <input class="form-check-input" type="radio" [id]="answer.answerSno"
                                                        [name]="'answer' + i" [value]="answer.answerSno"
                                                        [checked]="question.userAnswer === answer.answer">
                                                    <label class="form-check-label" [for]="answer.answerSno">{{
                                                        answer?.answer
                                                        }}</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Multiple Choice Question -->

                                    <div *ngIf="question?.questionsTypeCd == 'Multiple'">
                                        <div class="card mt-3 p-2 w-75"
                                            *ngFor="let answer of question.answers; let j = index;"
                                            [ngClass]="{'highlighted': isChecked(i, j)}">
                                            <div class="d-flex" (click)="showSelectedMultiAnswer(i, j)">
                                                <div class="form-check custom-checkbox">
                                                    <input class="form-check-input" type="checkbox"
                                                        [id]="answer.answerSno" [name]="'answer' + i"
                                                        [value]="answer.answerSno" [checked]="isChecked(i, j)">
                                                    <label class="form-check-label" [for]="answer.answerSno">{{
                                                        answer?.answer }}</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Fill Up Question -->

                                    <div *ngIf="question?.questionsTypeCd == 'Fill Up'">
                                        <div class="card mt-3 p-2 w-75" style="background-color: #f1f1f1;">
                                            <textarea class="form-control" placeholder="Type your answer here..."
                                                [(ngModel)]="question.userAnswer"
                                                (ngModelChange)="onAnswerChange(question)"></textarea>
                                        </div>

                                    </div>

                                    <!-- Matching Paring -->

                                    <div *ngIf="question?.questionsTypeCd == 'Match'">
                                        <div class="card mt-3 match-card p-3" style="background-color: #f1f1f1;">
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-md-6 col-sm-12">
                                                        <div *ngFor="let pair of question.pairs; let j = index;">
                                                            <div class="d-flex">
                                                                <div class="p-2 mb-2">
                                                                    <p> {{ getRomanNumeral(j + 1) }}.</p>
                                                                </div>
                                                                <div class="left-item bg-white p-2 mb-2 w-100"
                                                                    style="padding-bottom: 10px;"
                                                                    style="border-radius: 5px;">
                                                                    {{ pair?.leftItem }}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 col-sm-12">
                                                        <div *ngFor="let pair of question.pairs; let j = index;">
                                                            <div class="d-flex">
                                                                <div class="p-2 mb-2">
                                                                    <p> {{ getAlphabet(j) }}.</p>
                                                                </div>
                                                                <div class="right-item bg-white p-2 mb-2 w-100"
                                                                    style="padding-bottom: 10px;"
                                                                    style="border-radius: 5px;">
                                                                    {{ pair?.rightItem }}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Matching Question -->
                                        <div class="card mt-3 p-2 w-75"
                                            *ngFor="let answer of question.answers; let j = index;"
                                            [ngClass]="{'highlighted': question.userAnswer === answer.answerSno}">
                                            <div class="d-flex"
                                                (click)="selectRadioButton(answer.answerSno, i, j, question?.questionsTypeCd)">
                                                <div class="form-check custom-radio">
                                                    <input class="form-check-input" type="radio" [id]="answer.answerSno"
                                                        [name]="'answer' + i" [value]="answer.answerSno"
                                                        [checked]="question.userAnswer === answer.answer">
                                                    <label class="form-check-label" [for]="answer.answerSno">{{
                                                        answer?.answer
                                                        }}</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="card-footer d-flex justify-content-between bg-light"
                                    style="border-top: 1px solid #e9ecef;">
                                    <!-- <button type="button" class="btn btn-outline-primary"
                                        data-bs-target="#carouselExampleControls" data-bs-slide="prev"
                                        [disabled]="i == 0">Previous</button>
                                    <button type="button" class="btn btn-outline-primary"
                                        data-bs-target="#carouselExampleControls" data-bs-slide="next"
                                        [disabled]="i === questionLists.length - 1">Next</button> -->

                                    <button type="button" class="btn btn-outline-primary" (click)="prevQuestion()"
                                        [disabled]="currentQuestionIndex === 0">Previous</button>
                                    <button type="button" class="btn btn-outline-primary" (click)="nextQuestion()"
                                        [disabled]="currentQuestionIndex === questionLists.length - 1">Next</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mt-4" style="float: right;" *ngIf="questionLists != null">
                    <button type="button" class="btn btn-primary" [disabled]="questionLists.length !== selectedCount"
                        (click)="submit()">Submit</button>
                </div>
            </div>
            <!-- <div class="col-md-3 col-sm-12 p-4">
                <div class="sidebar text-white">
                    <div class="sidebar-header p-3">
                        <h4 class="text-white">Questions</h4>
                    </div>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item" *ngFor="let question of questionLists; let i = index"
                            (click)="goToQuestion(i)" [class.active]="i === currentQuestionIndex">
                            Question {{ i + 1 }}
                        </li>
                    </ul>
                </div>
            </div> -->


            <div class="col-md-3 col-sm-12 p-4" *ngIf="questionLists != null">
                <div class="sidebar text-white">
                  <div class="sidebar-header p-3">
                    <h4 class="text-white">Questions</h4>
                  </div>
                  <ul class="list-group list-group-flush">
                    <li class="list-group-item" *ngFor="let question of questionLists; let i = index"
                      (click)="goToQuestion(i)" [class.active]="i === currentQuestionIndex">
                      Question {{ i + 1 }}
                    </li>
                  </ul>
                </div>
              </div>
        </div>
    </div>
</section>


<!-------------------------------------------------- Modal ---------------------------------------------------------------->

<!-- Modal -->
<!-- <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
    *ngIf="questionLists != null" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content custom-modal">
            <div class="modal-header custom-modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">Test Result</h5>
                <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body custom-modal-body">
                <h4>Your Test Score is - {{totalScoreCount}} / {{questionLists.length}}</h4>
                <div class="emoji" *ngIf="showEmoji">
                    <span [ngClass]="{'happy': totalScoreCount > 2, 'neutral': totalScoreCount > 0 && totalScoreCount <= 2, 'sad': totalScoreCount === 0}">
                        {{ getEmoji() }}
                    </span>
                </div>
            </div>
            <div class="modal-footer custom-modal-footer">
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div> -->

<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
    *ngIf="questionLists != null" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content elegant-modal">
            <div class="modal-header elegant-modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">Test Result</h5>
                <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body elegant-modal-body">
                <h4>Your Test Score is - {{totalScoreCount}} / {{questionLists.length}}</h4>
                <!-- <div class="emoji" *ngIf="showEmoji">
                    <span
                        [ngClass]="{'happy': totalScoreCount > 2, 'neutral': totalScoreCount > 0 && totalScoreCount <= 2, 'sad': totalScoreCount === 0}">
                        {{ getEmoji() }}
                    </span>
                </div> -->
            </div>
            <div class="modal-footer elegant-modal-footer">
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<app-footerone></app-footerone>

<span #scoreBoard id="scoreBoard" data-bs-target="#exampleModalCenter" class="d-none" data-bs-toggle="modal"></span>